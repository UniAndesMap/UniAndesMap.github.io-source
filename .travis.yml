branches:
  only:
  - master
language: python
python:
- 2.7

install:
# Updates the catalog.
- sudo apt-get update -qq
# Installs the packages.
- sudo apt-get install python-pip curl -y
# Installs the Python packages for Pelican.
- pip install -r requirements.txt

script:
# Installs Pelican
- export PYTHONIOENCODING=utf-8
# Copies the extra directory
- cp -r extra/* output/
# Generates the package
- pelican
- find .

notifications:
  email:
    on_success: always
    on_failure: always

env:
  global:
  - secure: fA0JP9BWfr8TMtYU4bU8IxoxY20FtwCaUvAc8G1rAm36qPMPcVXipks9P3NCGrQecAPfDMhDPaYr7fm2viV2sBdo+nPn8asN9zoEGkR7BdHRRqeSAu2JYCPpfOWdUZM8o4REGx8mVAxHTeZlvEjNuwInJNhhqq/nTR/Jzqgs3haR58GnaabS9tV4BimLfzkgwamKmUEIKKUEMA7mwRi6yaTroqMZztSx3PnP3JHHvCPQTJsChGFEZzb0optOj2mUggVr0TAFJQMfH0StsMP3CrT5tqwfU9f2m2QMaLNvvgTICbpmCARNwe86yuul8YHRat62nQsaZGKy2U8sLcep3hvVWnILQKuitnSg3Bv2INFfZfkMGwrpM8LyUrPRIgbx3fdxvdYP0yrmEDDWAj4bqnd88wpzleB/w6x6xHrIuOkkk+NgE3qeFHJuGzm8mvyCp7y7RWJWqbsiuQAqBKUkS1Crg4/n+U15d8YXdZQUpSf9ymUSh1rDDEaJlMfsa2rGraiiFKTiZ79ulN9wIuKMcvirvC6Vozn2+cc4l/IwsUPZW9f3VIXdWmvQkMr4aZvjVaN8Oajl69YX96tVR+vrwBMbcSIUj4C8RGrHwjXRZrbkVe2EBOsLS3RRIxVFr3VirBvNQATyAP9335PKvxk+WMHvapoWE3kiiDHoEk82bAc=

before_install:
- git submodule update --init --recursive

after_success: bash deploy.sh


